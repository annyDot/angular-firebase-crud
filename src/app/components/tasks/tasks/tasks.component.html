<div class="containerPaper">
  <div class="cardsHeader">
    <fa-icon
      class="icon"
      [icon]="timesheetIcon"
      style="color: #c947f5"
    ></fa-icon>
    <h1>Tasks</h1>
  </div>

  <div class="addBarContainer">
    <div class="addBar">
      <form (ngSubmit)="onSubmit()" #taskForm="ngForm">
        <input
          class="taskInput"
          type="text"
          ngModel
          name="name"
          placeholder="What are you working on?"
        />
        <button class="addButton" type="submit">
          <fa-icon
            class="icon"
            [icon]="faPlusCircle"
            style="color: #c947f5"
          ></fa-icon
          >{{ " " }}Add Project
        </button>
      </form>
    </div>
    <app-timer></app-timer>
  </div>
  <table class="styled-table">
    <thead>
      <tr>
        <th>{{ myDate | customDate }}</th>
        <th>Total: 06:00:00</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of tasks">
        <td>
          <span>{{ task?.name }}</span>
          <span
            ><button class="expandButton" (click)="toggleExpandTask(task)">
              <fa-icon
                class="icon"
                [icon]="faCaretDown"
                style="color: #c947f5"
              ></fa-icon></button
          ></span>
        </td>

        <td>08:00 AM - 10:00 AM</td>
        <td>02:00</td>
        <td>
          <input
            class="editInput"
            *ngIf="task.isEditMode"
            type="text"
            (keyup.enter)="onUpdateTask(task)"
            [(ngModel)]="task.name"
            placeholder="Task Name"
          />
        </td>

        <!--<button
            *ngIf="task.isEditMode"
            (click)="onUpdateTask(task)"
            type="button"
          >
            Update
          </button>-->

        <td>
          <button
            type="button"
            (click)="toggleEditMode(task)"
            style="background-color: unset"
          >
            <fa-icon
              class="icon"
              [icon]="faPen"
              style="color: #c947f5"
            ></fa-icon>
          </button>
        </td>
        <td>
          <button
            type="button"
            (click)="onDeleteTask(task.id)"
            style="background-color: unset"
          >
            <fa-icon
              class="icon"
              [icon]="faTrashAlt"
              style="color: #ff5e13"
            ></fa-icon>
          </button>
        </td>
        <div
          class="taskExpandedDetails"
          *ngIf="task.isExpandable"
          style="width: 100%"
        >
          <hr
            style="
              width: 100%;
              height: 1px;
              border: none;
              padding: 0;
              margin: 0;
              background-color: #d8d8d8;
            "
          />
          <ul>
            <li>
              <input
                type="text"
                [(ngModel)]="task.description"
                name="description"
                style="border: none"
                (keyup.enter)="onUpdateTask(task)"
                placeholder="Description"
              />
            </li>
          </ul>
        </div>
      </tr>
    </tbody>
  </table>
</div>
